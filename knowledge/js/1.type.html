<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于类型 | 个人主页</title>
    <meta name="description" content="lien的知识库">
    
    
    <link rel="preload" href="/Blog/assets/css/0.styles.a52f7505.css" as="style"><link rel="preload" href="/Blog/assets/js/app.40e704ba.js" as="script"><link rel="preload" href="/Blog/assets/js/7.9d47b4ec.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.60ecc6d5.js"><link rel="prefetch" href="/Blog/assets/js/11.72ac068d.js"><link rel="prefetch" href="/Blog/assets/js/12.722112fd.js"><link rel="prefetch" href="/Blog/assets/js/13.efa2a994.js"><link rel="prefetch" href="/Blog/assets/js/14.3ff6bf58.js"><link rel="prefetch" href="/Blog/assets/js/15.8181fff5.js"><link rel="prefetch" href="/Blog/assets/js/16.167f2b5e.js"><link rel="prefetch" href="/Blog/assets/js/17.6c2bdab6.js"><link rel="prefetch" href="/Blog/assets/js/2.7ec19d15.js"><link rel="prefetch" href="/Blog/assets/js/3.3482f35c.js"><link rel="prefetch" href="/Blog/assets/js/4.41eb0b05.js"><link rel="prefetch" href="/Blog/assets/js/5.fca98bba.js"><link rel="prefetch" href="/Blog/assets/js/6.3175f31d.js"><link rel="prefetch" href="/Blog/assets/js/8.2aaaa858.js"><link rel="prefetch" href="/Blog/assets/js/9.43a85682.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.a52f7505.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/knowledge/js/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/dataStructure/" class="nav-link">数据结构</a></li></ul></div></div><div class="nav-item"><a href="/Blog/work/" class="nav-link">工程</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/LienJack/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/knowledge/js/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/dataStructure/" class="nav-link">数据结构</a></li></ul></div></div><div class="nav-item"><a href="/Blog/work/" class="nav-link">工程</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/LienJack/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Blog/knowledge/js/" class="sidebar-link">首页</a></li><li><a href="/Blog/knowledge/js/1.type.html" class="active sidebar-link">关于类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#类型种类" class="sidebar-link">类型种类</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#本地对象、内置对象和宿主对象" class="sidebar-link">本地对象、内置对象和宿主对象</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#类型转换" class="sidebar-link">类型转换</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#类型判断" class="sidebar-link">类型判断</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#vs" class="sidebar-link">==vs ===</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/1.type.html#浅拷贝与深拷贝" class="sidebar-link">浅拷贝与深拷贝</a></li></ul></li><li><a href="/Blog/knowledge/js/1.typeDetail.html" class="sidebar-link">类型详解（可不读）</a></li><li><a href="/Blog/knowledge/js/2.scope.html" class="sidebar-link">作用域</a></li><li><a href="/Blog/knowledge/js/3.this.html" class="sidebar-link">this</a></li><li><a href="/Blog/knowledge/js/4.oop.html" class="sidebar-link">面向对象</a></li><li><a href="/Blog/knowledge/js/5.async.html" class="sidebar-link">异步</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="关于类型"><a href="#关于类型" aria-hidden="true" class="header-anchor">#</a> 关于类型</h1> <h2 id="类型种类"><a href="#类型种类" aria-hidden="true" class="header-anchor">#</a> 类型种类</h2> <p>JS 中分为七种内置类型，七种内置类型又分为两大类型：基本类型和引用类型</p> <h3 id="值类型"><a href="#值类型" aria-hidden="true" class="header-anchor">#</a> 值类型</h3> <ul><li><a href="/Blog/knowledge/js/1.typeDetail.html#类型string">字符串（string）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#类型number">数值（number)</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#类型boolean">布尔值（boolean）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#类型null">null</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#类型undefined">undefined</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#类型symbol">symbol</a></li></ul> <h4 id="特点"><a href="#特点" aria-hidden="true" class="header-anchor">#</a> 特点</h4> <ul><li>基础类型将内容直接存储在栈中（大小固定位置连续的存储空间）</li> <li>记录的是该数据类型的值，即直接访问</li> <li>保存与复制的是值本身</li> <li>方法中定义的变量都是放在栈内存中</li> <li>使用typeof检测数据的类型 ref 类型判断
<img src="https://note.youdao.com/yws/public/resource/d9d46e628e590a70bac3d351b36cbd16/xmlnote/F085E947010E413EA8116EA0EF26B907/29200" alt="image"></li></ul> <h3 id="引用类型："><a href="#引用类型：" aria-hidden="true" class="header-anchor">#</a> 引用类型：</h3> <ul><li><a href="/Blog/knowledge/js/1.typeDetail.html#对象object">对象（Object）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#对象array">数组（Array）</a></li> <li>函数（Function）</li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#对象string">字符串（String）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#对象date">日期（date）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#对象regExp">正则（Reg）</a></li> <li><a href="/Blog/knowledge/js/1.typeDetail.html#对象set">Set</a></li> <li>Map</li></ul> <h4 id="特点-2"><a href="#特点-2" aria-hidden="true" class="header-anchor">#</a> 特点</h4> <p>占用空间不固定，保存在堆中这个运行时数据区就是堆内存。堆内存中的对象不会随方法的结束而销毁，即使方法结束后，这个对象还可能被另一个引用变量所引用。
<img src="https://note.youdao.com/yws/public/resource/d9d46e628e590a70bac3d351b36cbd16/xmlnote/CC4F035AFCD84FED89E1E69E886C8D41/29207" alt="image"></p> <ul><li>保存与复制的是指向对象的一个指针</li> <li>使用instanceof检测数据类型 ref 类型判断</li> <li>使用new()方法构造出的对象是引用型 ref new</li></ul> <h2 id="本地对象、内置对象和宿主对象"><a href="#本地对象、内置对象和宿主对象" aria-hidden="true" class="header-anchor">#</a> 本地对象、内置对象和宿主对象</h2> <h3 id="本地对象"><a href="#本地对象" aria-hidden="true" class="header-anchor">#</a> 本地对象</h3> <p>ECMA-262把本地对象（native object）定义为：独立于宿主环境的ECMAScript实现的对象。</p> <p>这里简单说一下JavaScript的应用环境，JavaScript的应用环境由宿主环境和运行期环境构成。宿主环境主要是指外壳程序（shell）和Web浏览器等，运行期环境由JavaScript引擎内建的。</p> <p><img src="https://img-blog.csdn.net/20160809142910851" alt="image"></p> <p>现在来看一下本地对象有哪些：</p> <ul><li>Object</li> <li>Function</li> <li>Array</li> <li>String</li> <li>Number</li> <li>Date</li> <li>RegExp</li> <li>Boolean</li> <li>Error</li> <li>EvalError</li> <li>RangeError</li> <li>ReferenceError</li> <li>SyntaxError</li> <li>TypeError</li> <li>URIError</li></ul> <p>由此得出，JS的本地对象就是ECMA-262中定义的类（引用类型）。</p> <h3 id="内置对象"><a href="#内置对象" aria-hidden="true" class="header-anchor">#</a> 内置对象</h3> <p>ECMA-262把内置对象定义为：由ECMAScript提供实现的、独立于宿主环境的所有对象，在ECMAScript程序开始执行时出现。</p> <p>这意味着内置对象都是已经实例化好的，不需要我们再进行实例化了，这里我们首先会想到的就是Math对象。</p> <p>ECMA-262定义的内置对象只有两个：Global和Math。（本地对象和内置对象都是独立于宿主对象，根据定义可以看出来内置对象也是本地对象，在JS中所有的内置对象都是本地对象）。</p> <p>Math对象是我们经常用到的，但是Global就比较少见了。其实我们经常用到Global对象，只是没有用Global这个名字。</p> <p>Global对象是一个比较特殊的对象，它是一个全局对象，在程序中只有一个，它的存在伴随着整个程序的生命周期，全局对象不能通过名字来访问，但是它有一个window属性，这个属性指向它本身。</p> <p>大家也要清楚，在ECMAScript中不存在独立的函数，所有的函数都应该是某个对象的方法。类似于isNaN()、parseInt()、parseFloat()等方法都是Global对象的方法。</p> <h3 id="宿主对象"><a href="#宿主对象" aria-hidden="true" class="header-anchor">#</a> 宿主对象</h3> <p>宿主对象：由ECMAScript实现的宿主环境提供的对象。</p> <p>可能这样不是很好理解，上面已经说过了宿主环境包括Web浏览器，所以我们可以这样理解，浏览器提供的对象都是宿主对象。</p> <p>也可以这样理解，因为本地对象是非宿主环境的对象，那么非本地对象就是宿主对象，即所有的BOM对象和DOM对象都是宿主对象。</p> <p>那么还有一种对象，那就是我们自己定义的对象，也是宿主对象。</p> <p>最简单的理解：ECMAScript官方未定义的对象都属于宿主对象。</p> <h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>官方的定义太绕口，还不好理解。说的简单点：</p> <p>本地对象就是ECMAScript中定义好的对象，如String、Date等，内置对象是本地对象中比较特殊的一种，它不用实例化，包括Global和Math，宿主对象就是BOM、DOM和自己定义的对象。</p> <h2 id="类型转换"><a href="#类型转换" aria-hidden="true" class="header-anchor">#</a> 类型转换</h2> <h3 id="定义"><a href="#定义" aria-hidden="true" class="header-anchor">#</a> 定义</h3> <p>编程语言按照数据类型大体可以分为两类，一类是静态类型语言，另一类是动态类型语言。</p> <h4 id="静态类型"><a href="#静态类型" aria-hidden="true" class="header-anchor">#</a> 静态类型</h4> <p>编译时便已确定变量的类型</p> <p><strong>优点</strong></p> <ul><li>编译时就能发现类型不匹配的错误</li> <li>编译器还可以针对这些信息对程序进行一些优化工作，提高程序执行速度</li></ul> <p><strong>缺点</strong></p> <ul><li>让程序员的精力从思考业务逻辑上分散开来</li></ul> <h3 id="动态类型"><a href="#动态类型" aria-hidden="true" class="header-anchor">#</a> 动态类型</h3> <p>动态类型语言的变量类型要到程序运行的时候，待变量被赋予某个值之后，才会具有某种类型</p> <p><strong>优点</strong></p> <ul><li>编写的代码数量更少</li> <li>给实际编码带来了很大的灵活性</li></ul> <p><strong>缺点</strong></p> <h3 id="鸭子类型"><a href="#鸭子类型" aria-hidden="true" class="header-anchor">#</a> 鸭子类型</h3> <p>如果它走起路来像鸭子，叫起来也是鸭子，那么它就是鸭子
例子：Array.from</p> <h3 id="强制类型转换"><a href="#强制类型转换" aria-hidden="true" class="header-anchor">#</a> 强制类型转换</h3> <h4 id="转换为字符串"><a href="#转换为字符串" aria-hidden="true" class="header-anchor">#</a> 转换为字符串</h4> <p>Object.prototype也定义了toString方法，使得所有对象都拥有转换为字符串的能力</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
n<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// '1'</span>
</code></pre></div><p>还能判断对象的类型 ref：判断对象的类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> toString <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Math]</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// [object Object]</span>
</code></pre></div><h4 id="转换为数字"><a href="#转换为数字" aria-hidden="true" class="header-anchor">#</a> 转换为数字</h4> <p>在JavaScript中可以直接用parseInt和parseFloat</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> iNum1 <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;12345red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//返回 12345</span>
<span class="token keyword">var</span> iNum1 <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;0xA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//返回 10</span>
<span class="token keyword">var</span> iNum1 <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;56.9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//返回 56</span>
<span class="token keyword">var</span> iNum1 <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//返回 NaN</span>
<span class="token keyword">var</span> fNum4 <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;11.22.33&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回 11.22</span>

</code></pre></div><p>==NaN是JavaScript中唯一一个不等于自己的值。(NaN == NaN) === false==</p> <h3 id="隐形的强制转换"><a href="#隐形的强制转换" aria-hidden="true" class="header-anchor">#</a> 隐形的强制转换</h3> <p>若两运算元的型别不同，当其中一方是字串时，+ 所代表的就是字串运算子，而会将另外一个运算元强制转型为字串，并连接两个字串。如果不是字符串，那么都当成数字</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// &quot;11&quot;</span>
b <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 2</span>
b <span class="token operator">+</span> <span class="token string">''</span> <span class="token comment">// &quot;1&quot;</span>
c <span class="token operator">+</span> d <span class="token comment">// &quot;1,23,4&quot;</span>
</code></pre></div><p>c 和 d 分别会使用 toString 转为 '1, 2' 与 '3, 4'</p> <p><strong>重点</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// &quot;[object Object]&quot;</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//[object Object]</span>
</code></pre></div><ul><li>==[] + {}== 中，[] 先执行valueOf，返回[],然后再执行toString,返回&quot;&quot;, 而 {} 会转为字串 &quot;[object Object]&quot;。</li> <li>=={} + []== 中，{} 被当成空区块而无作用，+[] 被当成强制转型为数字 Number([]) （由于阵列是物件，中间会先使用 toString 转成字空串，导致变成 Number('')）而得到 0。</li> <li>但是为何console.log({} + []) //[object Object]和{}+[] 答案不一样就不知道（需要解决）</li></ul> <p>这里涉及toPrimitive()
<a href="https://blog.csdn.net/suxuelengyin/article/details/82759437" target="_blank" rel="noopener noreferrer">JS原始值转换算法---toPrimitive()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.php.cn/js-tutorial-410318.html" target="_blank" rel="noopener noreferrer">详解ECMAScript7规范中ToPrimitive抽象操作的知识<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/lengyuefengqing/article/details/51780882" target="_blank" rel="noopener noreferrer">js——类型转换原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="转换规则"><a href="#转换规则" aria-hidden="true" class="header-anchor">#</a> 转换规则</h3> <p><img src="https://note.youdao.com/yws/public/resource/cc6880e0a5be13e31932195d74bd38e2/xmlnote/855345644430435ABAFD152A885BBB73/36668" alt="image"></p> <h2 id="类型判断"><a href="#类型判断" aria-hidden="true" class="header-anchor">#</a> 类型判断</h2> <h3 id="typeof"><a href="#typeof" aria-hidden="true" class="header-anchor">#</a> typeof</h3> <h4 id="概念"><a href="#概念" aria-hidden="true" class="header-anchor">#</a> 概念</h4> <p>对于Undefined，boolean，number，number，symbol。返回本身
function返回function
null，object和其他返回object（null的理由看类型 <a href="/Blog/knowledge/js/1.typeDetail.html#类型null">null</a>）</p> <table><thead><tr><th>数据类型</th> <th>Type</th></tr></thead> <tbody><tr><td>Undefined</td> <td>“undefined”</td></tr> <tr><td>Null</td> <td>“object”</td></tr> <tr><td>布尔值</td> <td>“boolean”</td></tr> <tr><td>数值</td> <td>“number”</td></tr> <tr><td>字符串</td> <td>“string”</td></tr> <tr><td>Symbol (ECMAScript 6 新增)</td> <td>“symbol”</td></tr> <tr><td>函数对象</td> <td>“function”</td></tr> <tr><td>任何其他对象</td> <td>“object”</td></tr> <tr><td>isNaN</td> <td>“object”</td></tr></tbody></table> <h4 id="题目问题"><a href="#题目问题" aria-hidden="true" class="header-anchor">#</a> 题目问题</h4> <p>第一题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token keyword">typeof</span> x<span class="token punctuation">;</span>
 x<span class="token punctuation">;</span>
</code></pre></div><p>第二题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第三题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    bar<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baz<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    baz<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第四题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    bar<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baz<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    baz<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">typeof</span> <span class="token punctuation">(</span>f <span class="token operator">=</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第五题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> f<span class="token punctuation">;</span>
</code></pre></div><p>第六题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">+=</span> <span class="token keyword">typeof</span> f<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  x<span class="token punctuation">;</span>
</code></pre></div><p>第七题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token punctuation">{</span> bar<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="题目答案"><a href="#题目答案" aria-hidden="true" class="header-anchor">#</a> 题目答案</h4> <p>第一题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token keyword">typeof</span> x<span class="token punctuation">;</span>
 x<span class="token punctuation">;</span><span class="token comment">//&quot;undefined&quot;</span>
</code></pre></div><p>表达式是从右往左的，x由于变量提升，类型不是null，而是undefined，所以x=y=”undefined”。</p> <p>第二题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&quot;number&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>传入的参数为f也就是function(){ return 1; }这个函数。通过f()执行后，得到结果1，所以typeof 1返回”number”。这道题很简单，主要是区分f和f()。</p> <p>第三题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    bar<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baz<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    baz<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&quot;undefined&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这一题考察的是this的指向。this永远指向函数执行时的上下文，而不是定义时的（ES6的箭头函数不算）。当arguments执行时，this已经指向了window对象。所以是”undefined”</p> <p>第四题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    bar<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baz<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    baz<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">typeof</span> <span class="token punctuation">(</span>f <span class="token operator">=</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
</code></pre></div><p>如果上面那一题做对了，那么这一题也应该不会错，同样是this的指向问题。</p> <p>第五题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> f<span class="token punctuation">;</span><span class="token comment">//&quot;number&quot;</span>
</code></pre></div><p>如果上面那一题做对了，那么这一题也应该不会错，同样是this的指向问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> f<span class="token punctuation">;</span><span class="token comment">//&quot;number&quot;</span>
</code></pre></div><p>这一题比较容易错，因为我在遇到这道题之前也从来没有遇到过javascript的分组选择符。什么叫做分组选择符呢？举一个例子就会明白了：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3,会以最后一个为准</span>
</code></pre></div><p>所以上面的题目会返回2，typeof 2当然是”number”啦。</p> <p>第六题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">+=</span> <span class="token keyword">typeof</span> f<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  x<span class="token punctuation">;</span><span class="token comment">//&quot;1undefined&quot;</span>
</code></pre></div><p>这是一个javascript语言规范上的问题，在条件判断中加入函数声明。这个声明语句本身没有错，也会返回true，但是javascript引擎在搜索的时候却找不到该函数。所以结果为”1undefined”。</p> <p>第七题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token punctuation">{</span> bar<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="instanceof"><a href="#instanceof" aria-hidden="true" class="header-anchor">#</a> instanceof</h3> <h4 id="定义-2"><a href="#定义-2" aria-hidden="true" class="header-anchor">#</a> 定义</h4> <p>instanceof 检测左侧的 <strong>proto</strong> 原型链上，是否存在右侧的 prototype 原型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">_instanceof</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span><span class="token comment">// 取B的显示原型</span>
    <span class="token constant">A</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span><span class="token comment">// 取A的隐式原型</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Object.prototype.__proto__ === null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">O</span> <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token comment">// 这里重点：当 O 严格等于 A 时，返回 true</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token constant">A</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>数据类型</th> <th>Type</th></tr></thead> <tbody><tr><td>Undefined</td> <td>object Undefined</td></tr> <tr><td>Null</td> <td>object Null</td></tr> <tr><td>布尔值</td> <td>object Boolean</td></tr> <tr><td>数值</td> <td>object Number</td></tr> <tr><td>字符串</td> <td>object String</td></tr> <tr><td>Symbol</td> <td>(ECMAScript 6 新增) object  symbol</td></tr> <tr><td>函数对象</td> <td>object Function</td></tr> <tr><td>Date</td> <td>object Date</td></tr> <tr><td>数组</td> <td>object Array</td></tr> <tr><td>RegExp</td> <td>object RegExp</td></tr></tbody></table> <h4 id="类型判断函数"><a href="#类型判断函数" aria-hidden="true" class="header-anchor">#</a> 类型判断函数</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">type</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> s <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\[object (.*?)\]/</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token string">'Null'</span><span class="token punctuation">,</span>
 <span class="token string">'Undefined'</span><span class="token punctuation">,</span>
 <span class="token string">'Object'</span><span class="token punctuation">,</span>
 <span class="token string">'Array'</span><span class="token punctuation">,</span>
 <span class="token string">'String'</span><span class="token punctuation">,</span>
 <span class="token string">'Number'</span><span class="token punctuation">,</span>
 <span class="token string">'Boolean'</span><span class="token punctuation">,</span>
 <span class="token string">'Function'</span><span class="token punctuation">,</span>
 <span class="token string">'RegExp'</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">[</span><span class="token string">'is'</span> <span class="token operator">+</span> t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

type<span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
type<span class="token punctuation">.</span><span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
type<span class="token punctuation">.</span><span class="token function">isRegExp</span><span class="token punctuation">(</span><span class="token regex">/abc/</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="vs"><a href="#vs" aria-hidden="true" class="header-anchor">#</a> <code>==</code>vs <code>===</code></h2> <h3 id="两者的异同"><a href="#两者的异同" aria-hidden="true" class="header-anchor">#</a> 两者的异同</h3> <ul><li>比较双方都是对象时，只有指向同一个对象才会相等(包含==/===)</li> <li>===要求比较双方类型相同并且值相等</li> <li>==在比较双方类型不同的时候通常会进行隐式类型转换</li></ul> <h3 id="规律"><a href="#规律" aria-hidden="true" class="header-anchor">#</a> <code>===</code> 规律</h3> <p><img src="https://note.youdao.com/yws/public/resource/4f6f8589e2f0c33c8916eb1975c22af8/xmlnote/87267D31E4F64A3A8273F01A36C46515/29563" alt="image"></p> <ul><li>如果Type(x)和Type(y)不同，返回false</li> <li>如果Type(x)和Type(y)相同
<ul><li>如果Type(x)是Undefined，返回true</li> <li>如果Type(x)是Null，返回true</li> <li>如果Type(x)是String，当且仅当x,y字符序列完全相同（长度相同，每个位置上的字符也相同）时返回true，否则返回false</li> <li>如果Type(x)是Boolean，如果x,y都是true或x,y都是false返回true，否则返回false</li> <li>如果Type(x)是Symbol，如果x,y是相同的Symbol值，返回true,否则返回false</li> <li>如果Type(x)是Number类型
<ul><li>如果x是NaN，返回false</li> <li>如果y是NaN，返回false</li> <li>如果x的数字值和y相等，返回true</li> <li>如果x是+0，y是-0，返回true</li> <li>如果x是-0，y是+0，返回true</li> <li>其他返回false</li></ul></li></ul></li></ul> <h3 id="规律-2"><a href="#规律-2" aria-hidden="true" class="header-anchor">#</a> <code>==</code> 规律</h3> <p>对象全部类型转换使用Toprimitive（先value，后tostring）<a href="/Blog/knowledge/js/1.type.html#类型转换">类型转换</a>
其他全部toNumber
null == undefined  <a href="/Blog/knowledge/js/1.typeDetail.html#类型undefined">类型undefined</a> <img src="https://note.youdao.com/yws/public/resource/4f6f8589e2f0c33c8916eb1975c22af8/xmlnote/D4F23311B669494F8AF3A4DE646CD149/29584" alt="image"></p> <ul><li>如果Type(x)和Type(y)相同，返回x===y的结果</li> <li>如果Type(x)和Type(y)不同
<ul><li>如果x是null，y是undefined，返回true</li> <li>如果x是undefined，y是null，返回true</li> <li>如果Type(x)是Number，Type(y)是String，返回 x<code>==</code>ToNumber(y) 的结果</li> <li>如果Type(x)是String，Type(y)是Number，返回 ToNumber(x)<code>==</code>y 的结果</li> <li>如果Type(x)是Boolean，返回 ToNumber(x)<code>==</code>y 的结果</li> <li>如果Type(y)是Boolean，返回 x<code>==</code>ToNumber(y) 的结果</li> <li>如果Type(x)是String或Number或Symbol中的一种并且Type(y)是Object，返回 x<code>==</code>ToPrimitive(y) 的结果</li> <li>如果Type(x)是Object并且Type(y)是String或Number或Symbol中的一种，返回 ToPrimitive(x)<code>==</code>y 的结果
其他返回false</li></ul></li></ul> <p>用yck小册子的图
<a href="https://juejin.im/book/5bdc715fe51d454e755f75ef/section/5bed40d951882545f73004f6" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <img src="https://user-gold-cdn.xitu.io/2018/12/19/167c4a2627fe55f1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h2 id="浅拷贝与深拷贝"><a href="#浅拷贝与深拷贝" aria-hidden="true" class="header-anchor">#</a> 浅拷贝与深拷贝</h2> <p>深拷贝和浅拷贝是只针对Object和Array这样的对象数据类型的。</p> <p>深拷贝和浅拷贝的示意图大致如下：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/7/29/164e6856d76ff161?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <p>浅拷贝只复制指向某个对象的指针，而不复制对象本身，新旧对象还是共享同一块内存。但深拷贝会另外创造一个一模一样的对象，新对象跟原对象不共享内存，修改新对象不会改到原对象。</p> <h3 id="浅拷贝的实现方式"><a href="#浅拷贝的实现方式" aria-hidden="true" class="header-anchor">#</a> 浅拷贝的实现方式</h3> <h4 id="_1-直接赋值一个变量"><a href="#_1-直接赋值一个变量" aria-hidden="true" class="header-anchor">#</a> 1. 直接赋值一个变量</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>username<span class="token punctuation">:</span> <span class="token string">'kobe'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">39</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token punctuation">{</span>option1<span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span> option2<span class="token punctuation">:</span> <span class="token string">'女'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> obj1 <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  obj1<span class="token punctuation">.</span>sex<span class="token punctuation">.</span>option1 <span class="token operator">=</span> <span class="token string">'不男不女'</span><span class="token punctuation">;</span> <span class="token comment">// 修改复制的对象会影响原对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/7/29/164e6b87e4de0821?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h4 id="_2-object-assign"><a href="#_2-object-assign" aria-hidden="true" class="header-anchor">#</a> 2. Object.assign()</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">'kobe'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'wade'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{username: &quot;wade&quot;}</span>

</code></pre></div><h4 id="_3-array-prototype-concat"><a href="#_3-array-prototype-concat" aria-hidden="true" class="header-anchor">#</a> 3. Array.prototype.concat()</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">'kobe'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2<span class="token operator">=</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
arr2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'wade'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>修改新对象会改到原对象:</p> <p><img src="https://user-gold-cdn.xitu.io/2018/7/30/164e6c558688eb85?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h4 id="_4-array-prototype-slice"><a href="#_4-array-prototype-slice" aria-hidden="true" class="header-anchor">#</a> 4. Array.prototype.slice()</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">' kobe'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'wade'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>同样修改新对象会改到原对象:</p> <p><img src="https://user-gold-cdn.xitu.io/2018/7/30/164e6cc82022ba02?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image">
关于Array的slice和concat方法的补充说明：Array的slice和concat方法不修改原数组，只会返回一个浅复制了原数组中的元素的一个新数组。</p> <ul><li>如果该元素是个对象引用(不是实际的对象)，slice 会拷贝这个对象引用到新的数组里。两个对象引用都引用了同一个对象。如果被引用的对象发生改变，则新的和原来的数组中的这个元素也会发生改变</li> <li>对于字符串、数字及布尔值来说（不是 String、Number 或者 Boolean 对象），slice 会拷贝这些值到新的数组里。在别的数组里修改这些字符串或数字或是布尔值，将不会影响另一个数组。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">' kobe'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/7/31/164ebf93999a8648?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h3 id="深拷贝的实现方式"><a href="#深拷贝的实现方式" aria-hidden="true" class="header-anchor">#</a> 深拷贝的实现方式</h3> <h4 id="_1-json-parse-json-stringify"><a href="#_1-json-parse-json-stringify" aria-hidden="true" class="header-anchor">#</a> 1.JSON.parse(JSON.stringify())</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">' kobe'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr4 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr4<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'duncan'</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr4<span class="token punctuation">)</span>

</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/7/30/164e6d5f642d440a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <p>原理： 用JSON.stringify将对象转成JSON字符串，再用JSON.parse()把字符串解析成对象，一去一来，新的对象产生了，而且对象会开辟新的栈，实现深拷贝。</p> <p>这种方法虽然可以实现数组或对象深拷贝,但不能处理函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span> <span class="token string">' kobe'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr4 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr4<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'duncan'</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr4<span class="token punctuation">)</span>

</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/7/30/164e6daa14a1f8be?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <p>这是因为JSON.stringify() 方法是将一个JavaScript值(对象或者数组)转换为一个 JSON字符串，不能接受函数</p> <h4 id="手写递归方法"><a href="#手写递归方法" aria-hidden="true" class="header-anchor">#</a> 手写递归方法</h4> <p>递归方法实现深度克隆原理：遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token comment">//定义检测数据类型的功能函数</span>
    <span class="token keyword">function</span> <span class="token function">checkedType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//实现深度克隆---对象/数组</span>
    <span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//判断拷贝的数据类型</span>
      <span class="token comment">//初始化变量result 成为最终克隆的数据</span>
      <span class="token keyword">let</span> result<span class="token punctuation">,</span> targetType <span class="token operator">=</span> <span class="token function">checkedType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>targetType <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>targetType <span class="token operator">===</span> <span class="token string">'Array'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target
      <span class="token punctuation">}</span>
      <span class="token comment">//遍历目标数据</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取遍历数据结构的每一项值。</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token comment">//判断目标结构里的每一值是否存在对象/数组</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkedType</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Object'</span> <span class="token operator">||</span>
          <span class="token function">checkedType</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Array'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//对象/数组里嵌套了对象/数组</span>
          <span class="token comment">//继续遍历获取到value值</span>
          result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">//获取到value值是基本的数据类型或者是函数。</span>
          result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>

</code></pre></div><h4 id="深度object拷贝"><a href="#深度object拷贝" aria-hidden="true" class="header-anchor">#</a> 深度Object拷贝</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> name<span class="token punctuation">,</span> options<span class="token punctuation">,</span> copy<span class="token punctuation">,</span> src
     <span class="token keyword">let</span> length <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length
     <span class="token keyword">let</span> target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        options <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>options <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span>name <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                copy <span class="token operator">=</span> options<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
                src <span class="token operator">=</span> target<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>copy <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> copy <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    target<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> copy<span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>copy <span class="token operator">!=</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    target<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> copy
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> target
 <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-函数库lodash"><a href="#_3-函数库lodash" aria-hidden="true" class="header-anchor">#</a> 3.函数库lodash</h4> <p>该函数库也有提供_.cloneDeep用来做 Deep Copy</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">{</span> f<span class="token punctuation">:</span> <span class="token punctuation">{</span> g<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f <span class="token operator">===</span> obj2<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// false</span>

</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Blog/knowledge/js/" class="prev router-link-active">
          首页
        </a></span> <span class="next"><a href="/Blog/knowledge/js/1.typeDetail.html">
          类型详解（可不读）
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/Blog/assets/js/app.40e704ba.js" defer></script><script src="/Blog/assets/js/7.9d47b4ec.js" defer></script>
  </body>
</html>
